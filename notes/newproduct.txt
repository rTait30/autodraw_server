# Adding a New Product Checklist

## 1. Database (Source of Truth)
The product must exist in the database to be visible on the frontend.
- **Insert Product:** Add a row to the `products` table (Name, Description).
- **Insert Schema:** Add a default `EstimatingSchema` for the product.
- **Link:** Update the product's `default_schema_id`.

## 2. Backend Logic
Create a folder: `endpoints/api/products/<NAME>/` (Name should match the product name in DB).

- **`calculations.py`**:
  Must export a `calculate` function.
  ```python
  def calculate(data: dict) -> dict:
      # Mutate data['products'] or data['project_attributes']
      return data
  ```

- **`dxf.py`**:
  Must export a `generate_dxf` function.
  ```python
  def generate_dxf(project, download_name: str):
      # Return flask.send_file(...)
      pass
  ```

## 3. Frontend Components
Create a folder: `react/src/components/products/<NAME>/` (Name should match the product name in DB, usually UPPERCASE).

- **`Form.jsx`**:
  Must export `ProductForm`.
  ```jsx
  export const ProductForm = ({ register, control, watch, ... }) => { ... };
  // Optional: export const ProjectForm = ...
  ```

- **`Display.js`**:
  Must export a `render` function.
  ```javascript
  export function render(canvas, data) {
      // Draw to canvas based on data
  }
  ```

## 4. Restart
- **Backend:** Restart the Flask server. The new folder will be auto-discovered.
- **Frontend:** Reload the page. The new product will appear in the list automatically (fetched from DB).
